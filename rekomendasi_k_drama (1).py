# -*- coding: utf-8 -*-
"""Rekomendasi K-Drama.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1n44AiKJ-sQkkjFtBxXpf1ndjlug4wwjE

# **1. Import Library**
"""

import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
from scipy import stats
from scipy.stats import chi2_contingency
from sklearn.preprocessing import PowerTransformer
from sklearn.model_selection import train_test_split
from sklearn.model_selection import StratifiedShuffleSplit
from sklearn.preprocessing import StandardScaler
from sklearn.tree import DecisionTreeClassifier
from sklearn.ensemble import RandomForestClassifier
from sklearn.ensemble import GradientBoostingClassifier
import xgboost as xgb
from sklearn.metrics import roc_curve, auc, classification_report, confusion_matrix

"""# **2. Load Dataset**"""

# Import Data
data = pd.read_csv('https://raw.githubusercontent.com/filasofiya19/Sistem-Rekomendasi-K-Drama-Content-Based---Collaborative-Filtering/refs/heads/main/kdrama.csv')
print(data)

"""# **3. Data Understanding**

**Top 250 Korean Dramas (KDrama) Dataset**

Tentang Dataset:

Dataset ini diambil dari [Kaggle](https://www.kaggle.com/datasets/ahbab911/top-250-korean-dramas-kdrama-dataset) mencakup 17 fitur dan 250 sampel, dengan sampel tersebut merupakan top rank judul K-Drama dalam website MyDramaList.

Untuk setaip fiturnya berikut penjelasanya:

| Fitur               | Deskripsi                                                                                           |
|---------------------|-----------------------------------------------------------------------------------------------------|
| Name                | Judul dari K-drama.                                                                                 |
| Aired Date          | Tanggal pertama kali K-drama ditayangkan.                                                           |
| Year of Release     | Tahun di mana K-drama ini pertama kali dirilis.                                                     |
| Original Network    | Channel televisi atau platform OTT tempat K-drama ini pertama kali ditayangkan.                     |
| Number of Episodes  | Jumlah total episode dari K-drama tersebut.                                                         |
| Duration            | Durasi setiap episode dalam jam dan menit.                                                          |
| Content Rating      | Rating usia yang sesuai untuk penonton K-drama ini.                                                 |
| Rating              | Peringkat atau rating berdasarkan vote pengguna MyDramaList pada saat dataset dibuat.               |
| Synopsis            | Ringkasan atau plot cerita K-drama.                                                                 |
| Genre               | Genre atau kategori utama yang menggambarkan tema K-drama.      |
| Tags                | Elemen-elemen unik dari K-drama.          |
| Director            | Nama sutradara yang bertanggung jawab atas K-drama ini.                                             |
| Screenwriter        | Nama penulis skenario yang menulis cerita K-drama.                                                  |
| Cast                | Daftar aktor dan aktris yang membintangi K-drama ini.                                               |
| Production Companies| Perusahaan yang memproduksi K-drama tersebut.                                                       |
| Rank                | Peringkat K-drama dalam daftar top 250, berdasarkan popularitas dan rating.                         |

## **3.1 Cek Tipe Data**
"""

# Cek Tipe Data
data.info()

"""Dataset ini memiliki 1 tipe data float, 2 tipe data integer, 14 tipe data object.

## **3.2 Cek Dimensi Data**
"""

# Cek dimensi data
data.shape

"""( data memiliki 250 records (baris) dan 17 feature(kolom))"""

# Cek 5 data teratas
data.head()

#Cek 5 data terbawah
data.tail()

"""## **3.3 Cek Missing Value**"""

# Cek Missing Value
data.isnull().sum()

data[data.isnull().any(axis=1)]

"""Terlihat beberapa fitur yang memiliki 9 missing value yaitu Content Rating, Director, Screenwriter dan Production companies yang tersebar dalam 8 baris. karena 8 baris ini presentasinya kecil jadi baris yg ada missing valuenya dihapus saja

## **3.4  Data Duplikat**
"""

# cek duplikat
data.duplicated().any()

"""Tidak ada duplikat dalam dataset ini.

# **4. Analisis Univariat dan Visulisasinya**

## **4.1 Analisis Univariat Tahun Rilis**
"""

# Analisis Univariat Tahun Rilis
data['Year of release'].value_counts().sort_index().plot(kind='bar')

"""Pada Dataset ini paling banyak K-Drama yang rilis tahun 2021.

## **4.2 Analisis Univariat Saluran Penyiaran K-Drama**
"""

# Analisis Univariat Saluran Penyiaran K-Drama
data['Original Network'].value_counts().plot(kind='bar')

"""Terlihat pada dataset ini, k-darama yang ada terbanyak dari saluran tvN.

## **4.3 Analisis Univariat Hari penyiaran K-Drama**
"""

# Analisis Univariat Hari penyiaran K-Drama
data['Aired On'].value_counts().plot(kind='bar')

"""Terlihat pada dataset ini, k-drama yang ada terbanyak di siarkan pada Wednesday, Thursday

## **4.4 Analisis Univariat Jumlah Episode K-Drama**
"""

# Analisis UnivariatJumlah Episode K-Drama
data['Number of Episodes'].plot(kind='hist', bins=10)

"""Rentang episode 10 -30 mendominasi kebanyakan k-darama dalam dataset ini.

## **4.5 Analisis Univariat Waktu Durasi Tayang K-Drama per episode**
"""

#Convert Durasi ke dalam menit
import re

def convert_duration(duration):
    # Cari jam dan menit
    hours = re.findall(r'(\d+)\s*hr', duration)
    minutes = re.findall(r'(\d+)\s*min', duration)

    # Konversi jam ke menit, jika ada
    total_minutes = 0
    if hours:
        total_minutes += int(hours[0]) * 60
    if minutes:
        total_minutes += int(minutes[0])

    return total_minutes

# Terapkan fungsi ke kolom 'Duration'
data['Duration'] = data['Duration'].apply(convert_duration)

data['Duration'].plot(kind='hist', bins=10)
plt.title('Distribution of Duration')
plt.xlabel('Duration (minutes)')
plt.ylabel('Frequency')
plt.show()

"""Kebanyakan K-Drama dalam dataset ini berdurasi 60 - 70 menit.

## **4.6 Analisis Univariat kategori Content Rating usia**
"""

data['Content Rating'].value_counts().plot(kind='bar')

"""Kebanayakan K-Drama dataset ini diperuntukkan untuk penonton dengan usia 15 tahun ke atas.

## **4.7 Analisis Univariat Rating K-Drama**
"""

data['Rating'].plot(kind='hist', bins=10)

"""Kebanykan K-Drama dalam dataset ini memiliki rating 8,3 - 8,4.

# **5. Analisis Multivariat dan Visualisasinya**

## **5.1 Analsis Multivariat Rating dengan Jumlah Episode**
"""

sns.scatterplot(x='Number of Episodes', y='Rating', data=data)
plt.title('Rating vs. Number of Episodes')
plt.show()

"""K-Drama dengan Rating Tinggi kebanyakan rentang episodenya antara 0 - 40.

## **5.2 Analsis Multivariat Rating, Content Rating dengan Jumlah Episode**
"""

plt.figure(figsize=(10, 6))
sns.scatterplot(x='Number of Episodes', y='Rating', hue='Content Rating', data=data, palette='viridis')
plt.title('Content Rating vs. Rating vs. Number of Episodes')
plt.show()

"""Tidak terlalu berpengaruh anatara Rating, Content Rating dengan Jumlah Episode.

## **5.3 Analsis Multivariat Rating dengan Genre**
"""

# Pisahkan genre
genre_ratings = data['Genre'].str.get_dummies(',').multiply(data['Rating'], axis=0)
genre_avg_ratings = genre_ratings.mean().sort_values(ascending=False)

plt.figure(figsize=(12, 8))
sns.barplot(x=genre_avg_ratings.index, y=genre_avg_ratings.values)
plt.title('Average Rating by Genre')
plt.xticks(rotation=90)
plt.show()

"""Rating Tinggi K-Drama didominasi Genre Drama, Romance, dan Thriller.

# **6. Data Preparation**

## **6.1 Handling Missing Value**
"""

data.dropna(inplace=True)

# Cek Missing Value
data.isnull().sum()

"""Sekarang tidak ada missing value lagi, data yang semula memiliki 250 data judul film, sekarang hanya ada 242 judul film.

# **7. Model Development dengan Content Based Filtering**

Teknik ini merekomendasikan item yang mirip dengan preferensi pengguna di masa lalu. Content-Based Filtering merekomendasikan item berdasarkan kemiripan fitur  preferensi item yang sudah disukai atau dipilih oleh pengguna di masa a. Dalam kasus ini, fitur yang digunakan adalah genre K-Drama.
Teknik yang Digunakan: Biasanya menggunakan similarity measures (salah satunya, cosine similarity) untuk menghitung kemiripan antar item. Rekomendasi dihasilkan dengan memilih item yang memiliki skor kemiripan tertinggi dengan item yang diberikan.

Pada tahap ini akan di bangun sistem rekomendasi sederhana Judul K-drama berdasarkan Genre

## **7.1 Feature Engineering Representasi Teks**

Feature Engineering merupakan  teknik rekayasa fitur untuk representasi teks. Teknik ini mengubah teks pada data masukan ke dalam bentuk numerik sehingga dapat digunakan untuk pemodelan. [Feature Engginering](https://www.dicoding.com/academies/319/tutorials/18804)

TF-IDF (Term Frequency-Inverse Document Frequency) adalah teknik yang digunakan untuk menilai seberapa penting sebuah kata dalam konteks dokumen atau korpus. Pendekatan ini mengatasi kelemahan metode frekuensi kata sederhana dengan melakukan skala ulang berdasarkan seberapa sering kata tersebut muncul di keseluruhan dokumen.

Teknik ini mengubah teks pada data masukan ke dalam bentuk numerik sehingga dapat digunakan untuk pemodelan. Pada Feature Engineering ini menggunakan metode Basic vectorization approaches yaitu TF-IDF.

TF-IDF (Term Frequency-Inverse Document Frequency) adalah teknik yang digunakan untuk menilai seberapa penting sebuah kata dalam konteks dokumen atau korpus. Pendekatan ini mengatasi kelemahan metode frekuensi kata sederhana dengan melakukan skala ulang berdasarkan seberapa sering kata tersebut muncul di keseluruhan dokumen.

Pendekatan ini menggunakan dua komponen utama:

* TF (Term Frequency): Mengukur seberapa sering kata muncul dalam teks, dinormalisasi berdasarkan panjang dokumen.
* DF (Inverse Document Frequency): Mengukur seberapa unik kata tersebut dalam seluruh dokumen, sehingga kata yang umum di seluruh korpus diberi bobot lebih rendah.

Skor TF-IDF dihitung dengan mengalikan nilai TF dan IDF dari suatu kata. Hasilnya digunakan untuk mengenali istilah-istilah yang penting dalam teks tertentu. [TF-IDF](https://www.dicoding.com/academies/319/tutorials/18804)

Disini digunakan data Genre Karena penonton biasanya cenderung menyukai konten K-Drama yang meiliki tema Genre yang hampir mirip.
"""

from sklearn.feature_extraction.text import TfidfVectorizer

# Inisialisasi TfidfVectorizer
tf = TfidfVectorizer()

# Melakukan perhitungan idf pada data Genre
tf.fit(data['Genre'])

# Mapping array dari fitur index integer ke fitur Genre
tf.get_feature_names_out()

"""Terlihat beberapa Genre yang ada dalam dataset."""

# Melakukan fit lalu ditransformasikan ke bentuk matrix
tfidf_matrix = tf.fit_transform(data['Genre'])

# Melihat ukuran matrix tfidf
tfidf_matrix.shape

"""Perhatikanlah, matriks yang di miliki berukuran (242, 30). Nilai 242 merupakan ukuran data dan 30 merupakan matrik kategori Genre.

Untuk menghasilkan vektor tf-idf dalam bentuk matriks, kita menggunakan fungsi todense()
"""

# Mengubah vektor tf-idf dalam bentuk matriks dengan fungsi todense()
tfidf_matrix.todense()

# Membuat dataframe untuk melihat tf-idf matrix
# Kolom diisi dengan Judul K-Drama (Name)
# Baris diisi dengan Genre

pd.DataFrame(
    tfidf_matrix.todense(),
    columns=tf.get_feature_names_out(),
    index=data.Name
).sample(22, axis=1).sample(10, axis=0)

"""Output matriks tf-idf di atas menunjukkan beberapa judul k-drama dan kecondongan Kategori genrenya. Karena penonton biasanya cenderung menyukai konten K-Drama yang meiliki tema Genre yang hampir mirip.

Sampai di sini, telah berhasil diidentifikasi  representasi fitur penting dari setiap kategori Genre dengan fungsi tfidfvectorizer, juga telah dihasilkan matriks yang menunjukkan korelasi antara Genre dengan Name (Judul K-Drama). Selanjutnya, akan dihitung derajat kesamaan antara satu judul K-Drama dengan K-Drama lainnya untuk menghasilkan kandidat Judul K-Drama yang akan direkomendasikan.

## **7.2 Similarity Measure (Derajat Kesamaan)**

Dalam sistem rekomendasi, tingkat kesamaan atau degree of similarity adalah ukuran seberapa mirip dua item. Disebut juga sebagai similarity function, fungsi ini menghitung kesamaan antara dua item
* Semakin besar jarak, kesamaan semakin kecil (menuju nol).
* Semakin kecil jarak, kesamaan semakin besar (menuju satu).

Kesamaan berbanding terbalik dengan jarak: semakin kecil jarak antar item, semakin tinggi tingkat kesamaannya. [Similarity Measure](https://www.dicoding.com/academies/319/tutorials/17128).

Untuk tingkat kesamaan ini digunakan Cosine Similarity.

Cosine Similarity mengukur kesamaan antara dua vektor dan menentukan apakah kedua vektor tersebut menunjuk ke arah yang sama. Ia menghitung sudut cosinus antara dua vektor. Semakin kecil sudut cosinus, semakin besar nilai cosine similarity. [Cosine Similarity](https://www.dicoding.com/academies/319/tutorials/17128).
"""

from sklearn.metrics.pairwise import cosine_similarity

# Menghitung cosine similarity pada matrix tf-idf
cosine_sim = cosine_similarity(tfidf_matrix)
cosine_sim

"""Pada tahapan ini, dihitunh cosine similarity dataframe tfidf_matrix yang diperoleh pada tahapan sebelumnya. Dengan satu baris kode untuk memanggil fungsi cosine similarity dari library sklearn, kita telah berhasil menghitung kesamaan (similarity) antar restoran. Kode di atas menghasilkan keluaran berupa matriks kesamaan dalam bentuk array.

Selanjutnya, akan di lihat matriks kesamaan setiap Name (Judul K-Drama) dengan menampilkan Judul K-Drama (Name) dalam 5 sampel kolom (axis = 1) dan 10 sampel baris (axis=0).
"""

# Membuat dataframe dari variabel cosine_sim dengan baris dan kolom berupa Judul K-Drama (Name)
cosine_sim_df = pd.DataFrame(cosine_sim, index=data['Name'], columns=data['Name'])
print('Shape:', cosine_sim_df.shape)

# Melihat similarity matrix pada setiap Name (Judul K-Drama)
cosine_sim_df.sample(5, axis=1).sample(10, axis=0)

"""Dengan cosine similarity, telah berhasil diidentifikasi kesamaan antara satu Judul K-Drama dengan K-Drama lainnya. Shape (242, 242) merupakan ukuran matriks similarity dari data yang kita miliki. Berdasarkan data yang ada, matriks di atas sebenarnya berukuran 242 K-Drama X 242 K-Drama (masing-masing dalam sumbu X dan Y). Artinya, kita mengidentifikasi tingkat kesamaan pada 242 Judul K-Drama, dengan dipilih contoh 10 restoran pada baris vertikal dan 5 restoran pada sumbu horizontal.

## **7.3 Mendapatkan Rekomendasi**

Disini Rekomendasi K-Drama diambil K-Drama yang Genrenya berkaitan.
"""

def kdrama_recommendations(Name, similarity_data=cosine_sim_df, items=data[['Name', 'Genre']], k=5):
    """
    Rekomendasi Resto berdasarkan kemiripan dataframe

    Parameter:
    ---
    Name : Tipe data string (str)
           Judul K-Drama (index kemiripan dataframe)
    similarity_data : tipe data pd.DataFrame (object)
                      Kesamaan dataframe, simetrik, dengan Name (Judul K-Drama) sebagai
                      indeks dan kolom
    items : tipe data pd.DataFrame (object)
            Mengandung kedua nama dan fitur lainnya yang digunakan untuk mendefinisikan kemiripan
    k : tipe data integer (int)
        Banyaknya jumlah rekomendasi yang diberikan
    ---

    Pada index ini, kita mengambil k dengan nilai similarity terbesar
    pada index matrix yang diberikan (i).
    """

    # Mengambil data dengan menggunakan argpartition untuk melakukan partisi secara tidak langsung sepanjang sumbu yang diberikan
    # Dataframe diubah menjadi numpy
    # Range(start, stop, step)
    index = similarity_data.loc[:,Name].to_numpy().argpartition(
        range(-1, -k, -1))

    # Mengambil data dengan similarity terbesar dari index yang ada
    closest = similarity_data.columns[index[-1:-(k+2):-1]]

    # Drop nama_resto agar nama resto yang dicari tidak muncul dalam daftar rekomendasi
    closest = closest.drop(Name, errors='ignore')

    return pd.DataFrame(closest).merge(items).head(k)

"""Dengan menggunakan argpartition,di ambil sejumlah nilai k tertinggi dari similarity data (dalam kasus ini: dataframe cosine_sim_df). Kemudian, kita mengambil data dari bobot (tingkat kesamaan) tertinggi ke terendah. Data ini dimasukkan ke dalam variabel closest. Berikutnya, kita perlu menghapus nama_resto yang yang dicari agar tidak muncul dalam daftar rekomendasi.

Dalam contoh ini, akan dicari K-Drama yang mirip dengan Mr. Queen, sehingga  perlu drop Name Mr. Queen agar tidak muncul dalam daftar rekomendasi yang diberikan nanti.  
"""

data[data.Name.eq('Mr. Queen')]

"""Mr. Queen merupakan K- Drama dengan kategori Historical, Mystery, Comedy, Romance.
Tentu penonton berharap rekomendasi yang diberikan adalah K-Drama dengan genre yang mirip.
"""

# Mendapatkan rekomendasi film yang mirip dengan The Penthouse
kdrama_recommendations('Mr. Queen')

"""# **8. Evaluasi**

Untuk Evaluasi disini digunakan Precision@K, Mean Reciprocal Rank (MRR), dan Mean Average Precision (MAP).

## **8.1  Precision at K**

Precision@K mengukur ketepatan model dalam merekomendasikan item yang relevan di antara K rekomendasi teratas yang dihasilkan.

Precision@K merupakan rasio dari jumlah item relevan yang ditemukan dalam K rekomendasi teratas, dibagi dengan K. Dengan kata lain, Precision@K menunjukkan persentase rekomendasi yang relevan di antara K rekomendasi teratas.

Rumus:

![image.png](data:image/png;base64,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)
"""

def precision_at_k(recommended_items, relevant_items, k):
    # Validasi input
    if k <= 0:
        raise ValueError("Nilai k harus lebih besar dari 0.")
    if len(recommended_items) == 0:
        return 0  # Jika tidak ada item yang direkomendasikan, precision = 0

    # Ambil hanya sebanyak k item atau sebanyak item yang tersedia jika k melebihi jumlah yang direkomendasikan
    recommended_k = recommended_items[:min(k, len(recommended_items))]

    # Hitung jumlah item yang relevan
    relevant_count = sum(1 for item in recommended_k if item in relevant_items)

    # Precision dihitung sebagai rasio item yang relevan dalam top-k rekomendasi
    return relevant_count / k

# Contoh penggunaan
recommended_items = list(kdrama_recommendations('Mr. Queen')['Name'])
relevant_items = [
    '100 Days My Prince', 'Rookie Historian Goo Hae Ryung',
    'The Tale of Nokdu', 'Queen In Hyun\'s Man', 'The King\'s Affection'
]  # Daftar K-Drama yang relevan
precision = precision_at_k(recommended_items, relevant_items, k=5)
print(f"Precision@5: {precision}")

"""Nilai 1.0 berarti bahwa semua K item (rekomendasi K-Drama) teratas adalah relevan.

## **8.2 Mean Reciprocal Rank (MRR)**

Mean Reciprocal Rank (MRR) menilai seberapa cepat item relevan pertama muncul dalam daftar rekomendasi. MRR mengukur Reciprocal Rank dari item relevan pertama untuk beberapa query atau pengguna, lalu menghitung rata-ratanya.

Reciprocal Rank adalah kebalikan dari posisi item relevan pertama dalam daftar rekomendasi. MRR adalah rata-rata dari Reciprocal Rank untuk semua query atau pengguna.

Rumus:

![image.png](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAABhCAYAAAAqej/ZAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAw8SURBVHhe7Z3La9ReFMfjb6+idulCfIDFhQtrBWuFFtqKFDciFd0UFOtr5dtWV2qhijsfFVyIWOsTQaxWBV3UirVSFF0ItuLCZUXQP8Bfvqc5422axJm5aSfJfD9wvcnNJJ2JyTf3nnPuyaw/Lg4hhATwn1cTQsgUKBCEkFAoEISQUCgQhJBQKBCEkFAoEISQUCgQhJBQKBCEkFAoEISQUCgQxJrVq1c7s2bNknLlyhWvdYINGzbktp09e9ZrJWmBodbEmh8/fjgVFRWyvGTJEmd0dFSWgW5raWlxbt265bWStMAeBImN7u5uZ2xszHn16pXX4jgLFiyQev/+/VKTdEGBINYMDQ05VVVVTkNDg6zfvHlTavDhwwep161bJzVJFxQIYs3g4KDYIRYvXuw0NTU5ly9flqEFePPmjbSRdEKBINbcvn3baW5uluXW1lap7927J/XLly+d+vp6WSbpg0ZKYsXXr1/FMDk+Pi72BvQcli1bJm3Dw8PivRgYGOAQI6WwB0GsePv2rdgf1BiJeuvWrc67d+9yXovKykqpSfpgD4JYsXfvXqkvXbokNdBexbx583I9CZJO2IMgRYPhBHoJEAITNVb+/PnTaWxs9FpJGqFAkKJZs2aNiEBnZ+eUCEo1VtbU1EhN0gmHGISQUNiDIISEQoHIMDAWwqOACVMkPxAmjqAvTiybgAKRQWA8xAUODwKCmMi/UTGtra0VFy2ZgAKRMWAsRKDSyMiICASJBmLa0dEhsRzA75EpdygQGQITox48eJALUtq1a5e3hYShIeFfvnyRc1ZdXS3rZAIKRIZYuXKl09/fL3EINmAcrkleZqqUira2NufMmTO5SFAyGQoEmcLs2bO9JVLuUCDIFNAT6erq8tYmwBgdE7IQNhNHQXIZknwoECSQI0eOTMrjALvGyZMnvTV70LX3ixBJHhQIEkpPT88kqz4SwcSZV3LHjh3eEkkqFAgSCgx3Dx8+9NYmwOxNTSNnC47PbFPJhgJBIkGiF9NegMlZO3fuzKWUs4XZppINBYL8E9gLkLZeidMeAVsHjJYkmVAgSF5cvHhxUmRm3PYIkkwoECQvYC+4f/++tzZBnPYIkkwoEBkFk4/u3r0ry8gbiXVbEB8xnfaIUoMIUpwr8OLFi8z8Livc8R/JEHv27MGAPrS4wwTvk8Xj/xtYTzM4J+bv8Ze0/z4bmFGKFAyerMgxYU6L7u3tlenSJFtQIEhRwPZQV1cnwwyAgCq8JAfDEJIdSmqDQFKT+fPn52b0/SvzEZ5c5ueR+cccW5uvofeXpUuXilHNfLGsic2+5QiEwEx1nzV7BPFAD6KUuF3TSeO9sbExb8tUzM+GjaWrqqpke1dXl9fyR46Jdd0XxwnCZt9yJWv2CDKZknsxFi5cKLVm9Hn+/LnUQZw/fz7ni8dTPYigef3Ij4CAHPfilXV92Ysfm33LlVOnTuX+7wDjI7JFYtycW7ZskfrcuXNS+8GYF0axw4cPey2Fs23bNqnRHS7Uf2+zb5aBqF69enXSpC7GR2SHxAjE2rVrpXfgdukDLy7kWsSTasWKFV6LHb9///aWCsdm3ywCe8SNGze8NdojskSiAqU03v/OnTtSK7jQ0G09ePCg11Icv379khpPu0LfNm2zbzmwceNGp7293VuLP38EKQ2JEgjND4BxrInaJRoaGqQuluvXr0t97NgxqQuh2H2DvCL5lDS+lwG5Hf32iMePH3trJI0kSiBgEMQFhi6qeWHBOIkgnCAjYj5gyIL98Y4IPOVgdMwXm33BHy/FWqGl0L+TFHCeTHvEp0+fvCWSStyLsaQMDAyIeww1UFemusvev38v66iBfr6pqUnW/aAd2/3FvWhzxwjDZt9SEPRdiylx093dLcfFeYtyW+eL//tmqSSdRPUggA4j0D2F7UGNk4VG6CHfofv7JNEqXJSFGM5s9i13cI6OHz8uywiksk3BT0pL4gQCwwiNOcBLTWyNkzgeLlR4SAo1nNnsOxNAxOIocbJ9+3YRVBic45qbEfSds1KSTuIEAjQ3N0utTyJb4yQ4ffq01OiZFOqjt9k3yACZT0mjkRK9vadPn4qgIsEMST+JFAi4zGDowpPIxjhpguNoFObRo0elzhebfYOeGvmUtBkpIZy7d++W5WvXrsXyf0ZKTyIFAugw49ChQ1IrGo9QDLhwAZ5yhU68stk368DuABsNgP2GcSLZoeQC8f3790m1Ap86nqR+I9fg4KDUo6OjUvtRQ+K3b9+kNsGFq2nWW1tbpxgdbfYtZ2CbgY0GxuS0umdJCO5NWDIwSxKuMHwN1FiPAtvxWS3uBTnJjYZ1c3t7e7u35S/qNkVxhw1/+vr6pN1m33IG5wDnIy6XZhow3eH/umbTTkkFgsSH3qhaNI7ERGNItEAUbYAgqMCXm1ji/OJ3Z10gEmuDIIUBw66ZUDZoyjWGSb29vbKM4UB/f78sFwtmbcKQDHsR/n45sWjRIm8p21AgMoTOdMUNixs3aB6E5t9AbImNpwFuWHVpIicEySYUiAzx+vVr6RmsX79e1h89eiS1iRqDKysrpS4GeHHU3Yt3ZdClmV0oEBliZGREcmtqYFnQMOPjx48SY1Jscll4b+DFAe74m0lqMw4FIkM8e/ZMblg80dGTCBpm4DONjY3eWuHs27dPkvrA5TuTLk0zwbEmN8ZvQ+pBsw1AxBDViTaNTMW+/uhUBHfp/ijoGSEJMgLjtA12lnxd2hBkM6kySpBIpwrPWElSjrpgdVaszqj0ezPQVqzlXWfawnMxPj7utc4c+pvggtbvogWuR6Dt8NCo2xXnRL0t2O5Ht+Ecwn2N46Noe5DLW13u/nOp7ebfTzMUiIygN4aCixPruMgVdXOqiBQCbh69YUrl0tTvDzHQGxBChWUVCL1B/b9R21taWryWv2BfbMNxTOHTcwrR8BMmEPis/zhphgKREdBT0JtEwYWKi1hvaL2oi0GPFfQ0tQE3Eo7r/+5BqEBAqAq9AU1x8aMC4Rc+FVkUP0ECgf+DKHGI+g5JhTaIjADbwqpVq7y1CXR+hHoz8EJa9wKW5ULo6OjIhVIfOHDAa42HoaEhqf3fPYrq6upp8ZzMmTPHW5og31wWsFHAbjE8PCyxJVny6lAgMgAMa+7TzqmpqfFaJvB7M/Dm6kINlDDcdXZ2yjLS28d98evcmrlz50odF/jNMDCqobK2ttbbEi9w91ZUVEiqPRiFo0CgmvtQtg5Qm0koEBng8+fPUi9fvlxqxczxCas+ar+IRIEn46ZNm2QZUZrT4dLEjRUn6pk4ceKExIO4QwC5Kd3uvfeJeMHx3SGFBKdBpCFI+Xo90gAFIgPgKeyOywO7xDrM0BcS+UUkCrg0ISrumNlpa2vzWuMBvR484XFTgbh6EJs3b5ZjYsiFbv9MxGmgV4XMYzhPYZnH0BNT16fpkk06FIgMgJsB4/IgdJiBmwZh0fmOq9Hj0Kc7Qqr14o6r4LuYrzeI64VIKjj+33nhwgVvafro6emRHht+F+w2JuY8mDRBgUg5CBbCUwv5MYK6tjrMAPkaKM3sUEkCoeQgqgsP4QHoPeCpjfODJ3ZdXZ20B+0LAQT+ZETmm+P9+2nOEDN3CHoSKqqw2/iDpHQeTKoQXwZJJeo20xLmPtMAI9T5gFgB87gzUfBbokBMgsZhoOC3ur0Fb+tfEK9hfn8sow2fNfdVXNHMteP46urE5xHToNuwrH8Prl5tRzFdv9jf3Gb+rTS6OWfhH/dLE0KmGfRo4E1xBSI1ngwOMQghoVAgSF7AdYhCygsKBPknGohlMwuUTE3MnAZogyAlAeNxvJCovr6+LDJhq/1BQYBVGn43exBkRtEAKdws6l4sBzTMWktaRJECQSIxE6rYhhDjKYphCkKg+/r6vFaSZCgQJBKdbYkgK9uJWniK4ngIYvLPnCTJhAJBIlFRQK5LE/QGzNDpsOKfdxD3bFAyvVAgSCQQAqCZshX/mDqspGlqM5kKBYJEovMfbNLkk/RCgSCRIAsVppL7p00XO8Qg6YICQSJBFqqgqeQcYpQHFAgSiaZRg4szrmxJOMaTJ09kGS/7ieOYZHpgJCWJBEFNSICCGYiI/rPN0IRhRxi8FJMHBYIQEgqHGISQUCgQhJBQKBCEkFAoEISQUCgQhJBQKBCEkFAoEISQUCgQhJAQHOd/7tE/fGGP2W8AAAAASUVORK5CYII=)

Di mana rank_𝑖 adalah posisi item relevan pertama untuk query ke-𝑖
i, dan 𝑁 adalah jumlah query.
"""

def reciprocal_rank(recommended_items, relevant_items):
    for i, item in enumerate(recommended_items, start=1):
        if item in relevant_items:
            return 1 / i
    return 0

# Contoh penggunaan
recommended_items = list(kdrama_recommendations('Mr. Queen')['Name'])
relevant_items = ['100 Days My Prince', 'Rookie Historian Goo Hae Ryung',
    'The Tale of Nokdu', 'Queen In Hyun\'s Man', 'The King\'s Affection']  # Daftar K-Drama yang relevan
rr = reciprocal_rank(recommended_items, relevant_items)
print(f"Reciprocal Rank: {rr}")

"""Nilai 1.0 berarti item relevan (Rekomendasi K-Drama) pertama selalu ada di posisi teratas.

Semakin tinggi nilai MRR, semakin cepat item relevan ditemukan di dalam daftar rekomendasi.

## **8.3 Mean Average Precision (MAP)**

Mean Average Precision (MAP) mengukur akurasi rata-rata dari semua posisi relevan dalam daftar rekomendasi dan kemudian menghitung rata-ratanya untuk semua query atau pengguna. Dimana Untuk setiap query atau pengguna, kita menghitung Average Precision (AP), yang merupakan rata-rata Precision pada setiap posisi di mana item relevan muncul. MAP adalah rata-rata dari AP untuk seluruh query.

Rumus:

![image.png](data:image/png;base64,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)

Di mana AP𝑖 adalah Average Precision untuk query ke-𝑖, dan 𝑁 adalah jumlah query.

Untuk menghitung AP, kita menggunakan

![image.png](data:image/png;base64,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)

Di mana 𝑛 adalah jumlah item yang direkomendasikan, dan relevance (𝑘)
adalah 1 jika item pada posisi 𝑘 relevan, dan 0 jika tidak relevan.
"""

def average_precision(recommended_items, relevant_items):
    score = 0.0
    relevant_count = 0
    for i, item in enumerate(recommended_items, start=1):
        if item in relevant_items:
            relevant_count += 1
            score += relevant_count / i
    return score / len(relevant_items) if relevant_items else 0

# Contoh penggunaan
recommended_items = list(kdrama_recommendations('Mr. Queen')['Name'])
relevant_items = ['100 Days My Prince', 'Rookie Historian Goo Hae Ryung',
    'The Tale of Nokdu', 'Queen In Hyun\'s Man', 'The King\'s Affection']  # Daftar K-Drama yang relevan
ap = average_precision(recommended_items, relevant_items)
print(f"Average Precision: {ap}")

"""Nilai 1.0 menunjukkan bahwa semua item relevan berada di posisi paling atas dan semuanya relevan.

Jadi Berdasarkan Evaluasi menggunakan Precision@K, Mean Reciprocal Rank (MRR), dan Mean Average Precision (MAP) didapatkan nilai 1.0 yang berarti item yang di rekomendasikan relevan.

# **8. Interpretasi**

Jadi dengan menggunakan Content Based Filtering penonton K-Drama dapat menemukan judul baru yang sesuai dengan preferensi genre mereka di tengah banyaknya pilihan yang tersedia.

Genre sangat memengaruhi preferensi k-drama yang di tonton oleh penonton, penonton biasnaya lebih suka dengan K-Drama yang memiliki tema Genre yang hampir mirip.
"""